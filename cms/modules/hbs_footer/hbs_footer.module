<?php

/**
 * Implements hook_block_info().
 *
 * This hook declares what blocks are provided by the module.
 */
  function hbs_footer_block_info() {
    $blocks['hbs_footer_partners'] = array(
      'info' => t('Footer: Partners'),
      'status' => TRUE,
      'region' => 'footer_first'
    );

    return $blocks;
  }

  /**
   * Implements hook_block_configure().
   *
   * This hook declares configuration options for blocks provided by this module.
   */
  function hbs_footer_block_configure($delta = '') {
    $form = array();
    // The $delta parameter tells us which block is being configured.
    // In this example, we'll allow the administrator to customize
    // the text of the 'configurable text string' block defined in this module.
    if ($delta == 'hbs_footer_partners') {
      // All we need to provide is the specific configuration options for our
      // block. Drupal will take care of the standard block configuration options
      // (block title, page visibility, etc.) and the save button.
      $form['hbs_footer_content'] = array(
        '#type' => 'text_format',
        '#title' => t('Block content'),
        '#default_value' => variable_get('hbs_footer_partners_content', theme('hbs_footer_partners')),
      );
    }
    return $form;
  }  

  /**
   * Implements hook_block_save().
   *
   * This hook declares how the configured options for a block
   * provided by this module are saved.
   */
  function hbs_footer_block_save($delta = '', $edit = array()) {
    // We need to save settings from the configuration form.
    // We need to check $delta to make sure we are saving the right block.
    if ($delta == 'hbs_footer_partners') {
      // Have Drupal save the string to the database.
      variable_set('hbs_footer_partners_content', $edit['hbs_footer_partners_content']);
    }
  }

  /**
   * Implements hook_block_view().
   *
   * This hook generates the contents of the blocks themselves.
   */
  function hbs_footer_block_view($delta = '') {
    // The $delta parameter tells us which block is being requested.
    switch ($delta) {
      case 'hbs_footer_partners':
        // The subject is displayed at the top of the block. Note that it
        // should be passed through t() for translation. The title configured
        // for the block using Drupal UI supercedes this one.
        $block['subject'] = '';
        // The content of the block is typically generated by calling a custom
        // function.
        $block['content'] = hbs_footer_partners_contents($delta);
        break;
    }
    return $block;
  }

  /**
   * A module-defined block content function.
   */
  function hbs_footer_partners_contents($which_block) {
    switch ($which_block) {
      case 'hbs_footer_partners':
        // Modules would typically perform some database queries to fetch the
        // content for their blocks. Here, we'll just use the variable set in the
        // block configuration or, if none has set, a default value.
        // Block content can be returned in two formats: renderable arrays
        // (as here) are preferred though a simple string will work as well.
        // Block content created through the UI defaults to a string.
        $result = array(
          '#markup' => variable_get('hbs_footer_partners_content', theme('hbs_footer_partners')),
        );
        return $result;
    }
  }  

  /**
   * Implements hook_theme().
   */
  function hbs_footer_theme($existing, $type, $theme, $path) {
    $items = array (
    'hbs_footer_partners' => array(
      'template' => 'templates/hbs_footer_partners' // template file called hbs_footer_partners.tpl.php
    ));

    return $items;
  }